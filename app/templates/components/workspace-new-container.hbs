<div class="flex-container-full">
  {{#if showSubmissionViewer}}
    <div class="flex-item-full filter-options collapse" id="filter-list-side">
      <SubmissionsFilter @store={{store}} @onSearch={{action "setFilterCriteria"}} @sections={{model.sections}} @assignments={{model.assignments}} @users={{model.users}} @selectedFolderSet={{selectedFolderSet}} @selectedAssignment={{selectedAssignment}} @selectedSection={{selectedSection}} @selectedProblem={{selectedProblem}} @selectedStudents={{selectedStudents}} @selectedTeacher={{selectedTeacher}} @startDate={{startDate}} @endDate={{endDate}} @isTrashedOnly={{toggleTrashed}} />



    </div>
    <div class="flex-item-full list-view">
      <div class="list-container">
        <div class="top-row">
          <h1 class="heading">Submissions</h1>
        {{#if selectedAnswers.length}}
          {{#if toggleTrashed}}
          <div class="action restore-all">
            <button class="primary-button animated fadeIn" {{action "restoreAllSelected"}}>Restore {{selectedAnswers.length}} Submissions</button>
          </div>
          {{else}}
          <div class="action">
            <button class="primary-button animated fadeIn" {{action "toSettingsConfig"}}>Create Workspace</button>
          </div>
          {{/if}}
        {{/if}}
        </div>
      </div>
      <div class="results-list">
        <div class="results-info">
          <div class="results-icons">
            <span class="icon-message submissions">
              <i class="fas fa-file"></i>
              {{sortedAnswers.length}} Submissions
            </span>
            <span class="icon-message selected">
              <i class="fas fa-check-circle"></i>
              {{selectedAnswers.length}} Selected
            </span>
            {{#if submissionThreads.size}}
              <span class="icon-message students">
                <i class="fas fa-user"></i>
                {{submissionThreads.size}} Students
              </span>
            {{else}}
              <span class="icon-message students">
                <i class="fas fa-user"></i> 0 Students
              </span>
            {{/if}}
          </div>
          <div class="side-icons">
            <MySelect @content={{revisionsSelectOptions}} @cannotBeNull={{true}} @selectedValue={{selectedRevisionOption}} @action={{action (mut selectedRevisionOption)}} />
            <i class="fas fa-redo-alt refresh-icon" {{action 'refreshList'}} title="Refresh Submission list"></i>
          </div>
        </div>
        <div class="results-items" id="layout-view">
          <div class="sort-bar">
            <div class="sort-bar-item toggle-all">
              <input type="checkbox" onclick={{action "toggleCheckAllAnswers"}}>
            </div>
            <ToggleControl @classToAdd="sort-bar-item student" @onUpdate={{action "updateSortCriterion"}} @initialState={{1}} @options={{sortOptions.student}} @label="Student" @parentProp={{sortCriterion}} @type="student" @activeType={{sortCriterion.type}} />
            <ToggleControl @classToAdd="sort-bar-item revisions" @onUpdate={{action "updateSortCriterion"}} @initialState={{0}} @options={{sortOptions.revisions}} @label="Revisions" @type="revisions" @activeType={{sortCriterion.type}} />
            <ToggleControl @classToAdd="sort-bar-item explanation" @onUpdate={{action "updateSortCriterion"}} @initialState={{0}} @options={{sortOptions.explanation}} @label="Explanation" @type="explanation" @activeType={{sortCriterion.type}} />
            <ToggleControl @classToAdd="sort-bar-item section" @onUpdate={{action "updateSortCriterion"}} @initialState={{0}} @options={{sortOptions.section}} @label="Class" @type="section" @activeType={{sortCriterion.type}} />
            <ToggleControl @classToAdd="sort-bar-item createDate" @onUpdate={{action "updateSortCriterion"}} @initialState={{0}} @options={{sortOptions.createDate}} @label="Date" @type="createDate" @activeType={{sortCriterion.type}} />
            <div class="sort-bar-item more"></div>
          </div>
          {{#if isFetchingAnswers}}
            <div class="loading-message-container">
              <p class="loading-message">Loading submissions</p>
                <div style="color: #3997EE" class="la-ball-clip-rotate la-3x loading">
                  <div></div>
                </div>
              <p class="loading-message">Thank you for your patience</p>
            </div>
          {{else if isRequestTooLarge}}
            {{tooLargeRequestErrorMessage}}
          {{else}}
          <SubmissionViewerList @answers={{sortedAnswers}} @metadata={{answersMetadata}} @isList={{true}} @isGrid={{false}} @moreMenuOptions={{moreMenuOptions}} @store={{store}} @onSelect={{action "updateSelectedAnswers"}} @selectedAnswers={{selectedAnswers}} @threads={{submissionThreads}} />
          {{/if}}
        </div>
      </div>
    </div>
    {{/if}}
  </div>
  {{#if showWorkspaceSettingsMenu}}
    <WorkspaceNewSettings @store={{store}} @users={{model.users}} @folderSets={{model.folderSets}} @onProceed={{action "createWorkspace"}} @onBack={{action "toSearchFilter"}} @createWorkspaceError={{createWorkspaceError}} />
  {{/if}}
  {{#if showSubmissionViewer}}
    <div class="toggle-filter-menu">
    <button {{action 'toggleMenu'}}><i id="arrow-icon" class="fas fa-chevron-right"></i></button>

    </div>
{{/if}}


<script>
  $('.list-view').click(function (e) {
    if (!($('#filter-list-side').hasClass('collapse'))) {
      $('#arrow-icon').toggleClass('fa-rotate-180');
    }
    $('#filter-list-side').addClass('collapse');
  });

  $('#submission-new-link').click(function (e) {
    $('#outlet').removeClass('hidden');
  });
</script>